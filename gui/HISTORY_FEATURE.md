# 对话历史记录功能说明

## 功能概述

为严小希对话界面新增了历史记录功能，用户可以在左侧面板查看和管理与严小希的所有对话记录。

## 主要功能

### 1. 历史记录面板
- **位置**: 对话界面左侧
- **功能**: 显示所有对话会话的列表
- **特性**: 
  - 可折叠/展开
  - 显示对话标题和预览
  - 显示最后对话时间
  - 支持删除单个对话

### 2. 会话管理
- **新建对话**: 点击"新建对话"按钮创建新的对话会话
- **切换对话**: 点击历史记录中的任意对话可切换到该对话
- **删除对话**: 鼠标悬停在对话项上，点击删除按钮可删除该对话
- **清空历史**: 点击清空按钮可删除所有对话记录

### 3. 自动保存
- **实时保存**: 对话内容会自动保存到本地存储
- **会话恢复**: 刷新页面后会自动恢复当前会话
- **数据持久化**: 使用localStorage存储，数据不会丢失

## 界面布局

```
┌─────────────────┬─────────────────────────────────┐
│   历史记录面板    │          对话主界面              │
│                 │                                 │
│ • 对话1         │                                 │
│ • 对话2         │                                 │
│ • 对话3         │                                 │
│                 │                                 │
│ [新建对话]       │                                 │
└─────────────────┴─────────────────────────────────┘
```

## 使用方法

### 基本操作
1. **开始新对话**: 点击左侧"新建对话"按钮
2. **查看历史**: 在左侧面板中点击任意历史对话
3. **删除对话**: 鼠标悬停在对话项上，点击出现的删除按钮
4. **收起面板**: 点击左侧面板的收起按钮

### 响应式设计
- **桌面端**: 历史记录面板固定显示在左侧
- **移动端**: 历史记录面板可折叠，节省屏幕空间

## 技术实现

### 组件结构
- `HistoryPanel.vue`: 历史记录面板组件
- `YanxxDialog.vue`: 主对话组件（已集成历史记录功能）

### 数据存储
- 使用 `localStorage` 存储对话历史
- 存储键名: `yanxx_chat_history`
- 数据格式: JSON数组

### 会话数据结构
```javascript
{
  id: "会话唯一标识",
  title: "对话标题",
  preview: "对话预览文本",
  messages: [/* 消息数组 */],
  lastTime: "最后对话时间",
  createdAt: "创建时间"
}
```

## 注意事项

1. **数据安全**: 历史记录仅存储在本地浏览器中，不会上传到服务器
2. **存储限制**: 受localStorage容量限制，建议定期清理历史记录
3. **浏览器兼容**: 需要支持localStorage的现代浏览器
4. **隐私保护**: 用户可随时删除历史记录保护隐私

## 更新日志

- **v1.0**: 初始版本，支持基本的对话历史记录功能
- 支持会话创建、切换、删除
- 支持历史记录清空
- 支持面板折叠/展开
- 支持响应式设计 

# AI续写功能增强说明

## 新增功能

### 1. 风格/情感标签选择
用户现在可以为AI续写选择特定的风格和情感标签，以指导AI生成更符合期望的文本风格。

**可选的风格标签包括：**
- 浪漫 (romantic)
- 神秘 (mysterious) 
- 幽默 (humorous)
- 忧郁 (melancholy)
- 激动 (exciting)
- 平静 (peaceful)
- 怀旧 (nostalgic)
- 乐观 (optimistic)
- 悲观 (pessimistic)
- 戏剧性 (dramatic)
- 现实 (realistic)
- 奇幻 (fantasy)
- 悬疑 (suspense)
- 温暖 (warm)
- 冷酷 (cold)

**使用方法：**
1. 在右侧面板的"风格/情感标签"区域
2. 勾选一个或多个标签
3. AI会根据选择的标签调整续写的风格和情感色彩

### 2. 文章构思输入
用户可以提供对文章情节发展的构思，帮助AI更好地理解故事发展方向。

**使用方法：**
1. 在右侧面板的"文章构思"区域
2. 输入你对文章情节发展的想法，例如：
   - "主角接下来会遇到什么挑战？"
   - "故事会如何发展？"
   - "希望增加什么样的情节转折？"
   - "角色之间的关系会如何变化？"

## 功能特点

1. **多标签支持**：可以同时选择多个风格标签，AI会综合考虑所有标签
2. **智能提示**：输入框提供详细的提示信息，帮助用户更好地描述构思
3. **实时反馈**：选择标签时会有视觉反馈，选中的标签会高亮显示
4. **响应式设计**：界面会根据内容自动调整，保持良好的用户体验

## 技术实现

- **前端**：Vue 3 + Element Plus，使用响应式数据绑定
- **后端**：Python Flask，支持新的参数处理
- **AI模型**：通过改进的提示词工程，让AI更好地理解和应用用户的风格和构思要求

## 使用建议

1. **风格标签**：建议选择2-3个相关的标签，避免风格冲突
2. **文章构思**：尽量具体描述，比如"主角在下一段会遇到一个神秘人物，这个人物会给他一个重要的提示"
3. **组合使用**：风格标签和文章构思可以结合使用，效果更佳 