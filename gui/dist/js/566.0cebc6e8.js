"use strict";(self["webpackChunkchengshe_homework"]=self["webpackChunkchengshe_homework"]||[]).push([[566],{3903:function(e,a,l){l.d(a,{J:function(){return s}});var t=l(810);const s=(0,t.nY)("config",{state:()=>({settings:{textModel:{apiUrl:"",apiKey:"",name:"",params:{temperature:1,maxTokens:2048,generateNum:3,generateTextNum:100}},imageModel:{apiUrl:"",apiKey:"",name:""}}}),actions:{loadSettings(){const e=localStorage.getItem("settings");e&&(this.settings=JSON.parse(e))},saveSettings(){localStorage.setItem("settings",JSON.stringify(this.settings))}}})},8566:function(e,a,l){l.r(a),l.d(a,{default:function(){return S}});var t=l(641);function s(e,a,l,s,n,u){const o=(0,t.g2)("MessageContainer");return(0,t.uX)(),(0,t.Wv)(o)}var n=l(3751),u=l(33),o=l(953),i=l(4335),v=l(163),c=l(3903);const r={class:"MessageContainer"},d={key:0,class:"loading-overlay"},p={class:"left-panel"},g={class:"title-section"},b=["disabled"],m={class:"input-section"},k=["disabled"],h={class:"right-panel"},y={class:"content-request-section"},x=["disabled"],L={class:"style-section"},C={class:"style-tags"},f=["value","disabled"],K={class:"plot-section"},M=["disabled"],R=["onClick"],_={class:"confirm-cancel"},w=["disabled"];var N={__name:"TextEditor",setup(e){const a=(0,c.J)(),l=a.settings.textModel.apiUrl,s=a.settings.textModel.apiKey,N=a.settings.textModel.params.maxTokens,T=a.settings.textModel.name,U=a.settings.textModel.params.temperature,G=a.settings.textModel.params.generateNum,J=a.settings.textModel.params.generateTextNum,E=(0,o.KR)(""),S=(0,o.KR)(""),X=(0,o.KR)(""),I=(0,o.KR)(""),V=(0,o.KR)([{value:"romantic",label:"浪漫"},{value:"mysterious",label:"神秘"},{value:"humorous",label:"幽默"},{value:"melancholy",label:"忧郁"},{value:"exciting",label:"激动"},{value:"peaceful",label:"平静"},{value:"nostalgic",label:"怀旧"},{value:"optimistic",label:"乐观"},{value:"pessimistic",label:"悲观"},{value:"dramatic",label:"戏剧性"},{value:"realistic",label:"现实"},{value:"fantasy",label:"奇幻"},{value:"suspense",label:"悬疑"},{value:"warm",label:"温暖"},{value:"cold",label:"冷酷"}]),A=(0,o.KR)([]),q=(0,o.KR)(""),O=(0,o.KR)(!1),B=(0,o.KR)(!1),F=(0,o.KR)([]),H=async()=>{try{B.value=!0;const e=await i.A.get("http://localhost:5000/api/ConnectTest");(0,v.nk)({message:e.data,type:"success",duration:1e3})}catch(e){console.error("服务端检测：",e),(0,v.nk)({message:"服务端检测：连接异常",type:"error",duration:3e3})}finally{B.value=!1}},Q=e=>{S.value=q.value+e},W=()=>{O.value=!1,q.value=S.value,F.value=[]},Y=()=>{O.value=!1,S.value=q.value,F.value=[]},j=async()=>{if(T&&l&&T)try{B.value=!0;const e=await i.A.post("http://localhost:5000/api/submit",{config:{ModelName:T,apiKey:s,apiUrl:l,maxToken:N,ModelTemperature:U,generateNum:G,generateTextNum:J},title:E.value,content:S.value,ContentRequest:X.value,selectedStyles:A.value,plotOutline:I.value});console.log("提交结果:",e.data),e.data.new_suggestions&&(F.value=e.data.new_suggestions,0!==F.value.length?(O.value=!0,q.value=S.value):(0,v.nk)({message:"获取候选列表失败：api调用异常",type:"error",duration:3e3}))}catch(e){console.error("提交失败:",e),(0,v.nk)({message:e,type:"error",duration:3e3})}finally{B.value=!1}else(0,v.nk)({message:"请填写完整文本大模型api信息！",type:"error",duration:3e3})};return(0,t.sV)((()=>{H()})),(e,a)=>((0,t.uX)(),(0,t.CE)("div",r,[B.value?((0,t.uX)(),(0,t.CE)("div",d,a[5]||(a[5]=[(0,t.Lk)("div",{class:"loader"},null,-1)]))):(0,t.Q3)("",!0),(0,t.Lk)("div",p,[(0,t.Lk)("div",g,[(0,t.bo)((0,t.Lk)("textarea",{"onUpdate:modelValue":a[0]||(a[0]=e=>E.value=e),placeholder:"在此输入标题...",class:"title-input",disabled:B.value},null,8,b),[[n.Jo,E.value]])]),(0,t.Lk)("div",m,[(0,t.bo)((0,t.Lk)("textarea",{"onUpdate:modelValue":a[1]||(a[1]=e=>S.value=e),placeholder:"在此输入内容...",class:"text-input",disabled:B.value||O.value},null,8,k),[[n.Jo,S.value]])])]),(0,t.Lk)("div",h,[(0,t.bo)((0,t.Lk)("h3",null,"写作要求",512),[[n.aG,!O.value]]),(0,t.bo)((0,t.Lk)("div",y,[(0,t.bo)((0,t.Lk)("textarea",{"onUpdate:modelValue":a[2]||(a[2]=e=>X.value=e),placeholder:"在此输入你的写作要求，如作文题目、背景设定等...",class:"content-request-input",disabled:B.value},null,8,x),[[n.Jo,X.value]])],512),[[n.aG,!O.value]]),(0,t.bo)((0,t.Lk)("div",L,[a[6]||(a[6]=(0,t.Lk)("h4",null,"风格/情感标签",-1)),(0,t.Lk)("div",C,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(V.value,(e=>((0,t.uX)(),(0,t.CE)("label",{key:e.value,class:"style-tag"},[(0,t.bo)((0,t.Lk)("input",{type:"checkbox","onUpdate:modelValue":a[3]||(a[3]=e=>A.value=e),value:e.value,disabled:B.value},null,8,f),[[n.lH,A.value]]),(0,t.Lk)("span",null,(0,u.v_)(e.label),1)])))),128))])],512),[[n.aG,!O.value]]),(0,t.bo)((0,t.Lk)("div",K,[a[7]||(a[7]=(0,t.Lk)("h4",null,"文章构思",-1)),(0,t.bo)((0,t.Lk)("textarea",{"onUpdate:modelValue":a[4]||(a[4]=e=>I.value=e),placeholder:"在此输入你对文章情节发展的构思，如：主角接下来会遇到什么挑战？故事会如何发展？...",class:"plot-input",disabled:B.value},null,8,M),[[n.Jo,I.value]])],512),[[n.aG,!O.value]]),(0,t.bo)((0,t.Lk)("h3",null,"候选下文",512),[[n.aG,O.value]]),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(F.value,(e=>((0,t.uX)(),(0,t.CE)("div",{key:e.id,class:"suggestion-item",onClick:a=>Q(e.text)},(0,u.v_)(e.text),9,R)))),128)),(0,t.bo)((0,t.Lk)("div",_,[(0,t.bo)((0,t.Lk)("button",{onClick:Y,class:"CancelButton"}," 取消 ",512),[[n.aG,O.value]]),(0,t.bo)((0,t.Lk)("button",{onClick:W,class:"ConfirmButton"}," 确认 ",512),[[n.aG,O.value]])],512),[[n.aG,O.value]]),(0,t.Lk)("button",{onClick:j,class:"submit-btn",disabled:B.value},(0,u.v_)(O.value?"让小希重写一份":"让小希来帮你写吧~"),9,w)])]))}},T=l(6262);const U=(0,T.A)(N,[["__scopeId","data-v-0b256033"]]);var G=U,J={name:"AIContinuation",components:{MessageContainer:G}};const E=(0,T.A)(J,[["render",s]]);var S=E}}]);
//# sourceMappingURL=566.0cebc6e8.js.map